{% extends 'navMenu.html' %}

{% block additional %}
    {% load static %}
    <link href="{% static 'store/products_main.css' %}" rel="stylesheet">
{% endblock %}
{% block main %}
    <div class="container">
        <h3 class="mb-5">Lista produktów</h3>
    </div>

    <div class="container" id="list" style="min-height: 74vh; mb-5">
        <div class="row" style="position: relative; z-index: 2; width: 100%">
            {% for r in ratings %}
                <div class="col-lg-4 mt-2">
                    <a>
                        <div class="card text-center bg-light mb-4 pb-4">
                            <div id="a{{r.0.id}}" class="carousel slide mb-2" data-bs-touch="false" data-bs-interval="false">
                                <div class="carousel-indicators">
                                    <button type="button" data-bs-target="#a{{r.0.id}}" data-bs-slide-to="0"  aria-label="Slide 1" style="filter: invert(100%);"></button>
                                    <button type="button" data-bs-target="#a{{r.0.id}}" data-bs-slide-to="1" class="active" aria-current="true" aria-label="Slide 2" style="filter: invert(100%);"></button>
                                    <button type="button" data-bs-target="#a{{r.0.id}}" data-bs-slide-to="2" aria-label="Slide 3" style="filter: invert(100%);"></button>
                                  </div>
                                <div class="carousel-inner">
                                    <div class="carousel-item">
                                        {% if r.0.url1%}
                                            <div class="img_div m-auto" style="width: 22vw; height: 20vw; background-image: url({{r.0.url1}});"></div>
                                        {% else %}
                                            <div class="img_div no_img m-auto" style="width: 20vw; height: 20vw;"></div>
                                        {% endif %}
                                    </div>
                                    <div class="carousel-item active">
                                        {% if r.0.url1%}
                                            <div class="img_div m-auto" style="width: 22vw; height: 20vw; background-image: url({{r.0.url2}});"></div>
                                        {% else %}
                                            <div class="img_div no_img m-auto" style="width: 20vw; height: 20vw;"></div>
                                        {% endif %}
                                    </div>
                                    <div class="carousel-item">
                                        {% if r.0.url1%}
                                            <div class="img_div m-auto" style="width: 22vw; height: 20vw; background-image: url({{r.0.url3}});"></div>
                                        {% else %}
                                            <div class="img_div no_img m-auto" style="width: 20vw; height: 20vw;"></div>
                                        {% endif %}
                                    </div>
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#a{{r.0.id}}" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true" style="filter: invert(100%);"></span>
                                    <span class="visually-hidden ">Previous</span>
                                </button>
                                <button class="carousel-control-next " type="button" data-bs-target="#a{{r.0.id}}" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true" style="filter: invert(100%);"></span>
                                    <span class="visually-hidden">Next</span>
                                </button>
                            </div>
                            <div id="stars">
                                <div {% if r.1 >= 1 %} style="background-color: gold" {% else %} style="background-color: black" {% endif%}></div>
                                <div {% if r.1 >= 2 %} style="background-color: gold" {% else %} style="background-color: black" {% endif%}></div>
                                <div {% if r.1 >= 3 %} style="background-color: gold" {% else %} style="background-color: black" {% endif%}></div>
                                <div {% if r.1 >= 4 %} style="background-color: gold" {% else %} style="background-color: black" {% endif%}></div>
                                <div {% if r.1 >= 5 %} style="background-color: gold" {% else %} style="background-color: black" {% endif%}></div>
                            </div>

                            <h4>{{r.0.name}}</h4>
                            <h5>
                                <span {% if r.0.discount > 0 %} style="text-decoration: line-through" {% endif %}>{{r.0.price}} zł</span>
                                {% if r.0.discount > 0 %}
                                    <span style="color: red">{{r.0.price_with_discount}} zł</span>
                                {% endif %}
                            </h5>

                            <div id="btns">
                                <a class="btn btn-warning">Szczegóły</a>
                                <a class="btn btn-success" href="{% url 'add_to_cart' r.0.id %}">Dodaj do koszyka</a>
                            </div>
                        </div>
                    </a>
                </div>
            {% endfor %}
        </div>
    </div>

{% endblock %}